    <style>
        /* Hide the default checkbox */
        input[type="checkbox"] {
            display: none;
        }
    
        /* Create the custom checkbox */
        input[type="checkbox"] + label {
            position: relative;
            padding-left: 40px;
            cursor: pointer;
        }
    
        input[type="checkbox"] + label::before {
            content: "";
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border: 2px solid #60eebf;
            background-color: transparent;
        }
    
        /* Change the background color when the checkbox is checked */
        input[type="checkbox"]:checked + label::before {
            background-color: #60eebf;
        }
    
        /* Hide the default checkmark */
        input[type="checkbox"] + label::after {
            content: "\2713";
            position: absolute;
            left: 5px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 16px;
            display: none;
        }
    
        /* Show the custom checkmark when the checkbox is checked */
        input[type="checkbox"]:checked + label::after {
            display: block;
        }

        .job-card {
            position: relative;
        }

        .job-card a.apply-button {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
        }

        .job-card .apply-button button {
            pointer-events: auto;
        }

        .spinner-border {
            border-color: #10B981 transparent transparent transparent;
            border-width: 4px;
        }

    </style>
 
 <%- include ('partials/header') -%>

    <main>
        <section class=" pb-14 flex flex-col items-center">
            <div class="mt-28 sm:mt-36 max-page-width  relative flex flex-col gap-5 md:gap-16 justify-center items-center">
            
                <div class="h1-text w-[100%] ">
                    <div class="mx-4 sm:mx-12 md:mx-16">
                        <h1 class="text-center text-4xl sm:text-5xl md:text-6xl font-semibold ">Discover more than <br class="block sm:hidden"> <span class="text-[#10B981]">5000+ jobs</span></h1>
                        
                        <form action="/find-job/jobs" method="get" id="findJobForm"  id="findJobForm" class="w-[100%] flex justify-center">
                            <div class="flex flex-col sm:flex-row gap-y-2">
                                <div class="flex flex-row items-center gap-2 md:gap-6 mt-10 justify-center">
                                    <div class="flex border-black border-2 rounded-lg items-center px-2 sm:px-8 h-[58px] gap-2 sm:gap-4">
                                        <label for="title">
                                            <img src="/public/images/search-icon.png" alt="">
                                        </label>
                                        <input class="w-[80%] outline-none bg-transparent" type="text" name="searchTitle" placeholder="Enter job title, keyword" value="<%= searchTitle || '' %>">
                                    </div>
                                    
                                    <div class="flex border-black border-2 rounded-lg items-center px-2 sm:px-8 h-[58px] gap-2 sm:gap-4">
                                        <label for="search-location">
                                            <img src="/public/images/location-icon.png" alt="">
                                        </label>
                                        <input class="w-[80%] outline-none bg-transparent " type="text" name="searchLocation" placeholder="Location, country, city..." value="<%= searchLocation || '' %>" >
                                    </div>
                                                
                                    <button class="hidden sm:block hover:shadow-2xl rounded-lg bg-[#10B981] text-white px-12 h-[58px]" type="submit">Search</button>
                                    
                                </div>
                                
                                <button class="block sm:hidden hover:shadow-2xl rounded-lg bg-[#10B981] text-white px-12 h-[58px]" type="submit">Search</button>                                
                            </div>
                            
                        </form>
                    </div>
                </div>
            
            
                <div class="w-full px-4 sm:px-12 md:px-12 lg:px-28 flex flex-col md:flex-row md:justify-between">
                    <div class="w-[100%] md:w-[25%]" id="filters">
                        <div class="flex gap-y-2 md:gap-y-4 flex-col" id="filters">
                            <div class="flex flex-col gap-y-2 filter">
                                <div class="flex md:justify-between cursor-pointer hover:text-[#10B981]">
                                    <span class=" w-[40%] md:w-[100%] font-semibold text-lg md:text-2xl">Job Type</span> 
                                    <div class="w-5  flex items-center">
                                        <img class="arrow transition-transform" src="/public/images/arrow-up.png" alt="arow up"> 
                                    </div>
                                </div>                          
    
                                <div class="hidden dropdown">
                                    <ul class="flex flex-col gap-y-2">
                                        <li>
                                            <input type="checkbox" id="fullTime" name="jobType" value="fullTime">
                                            <label for="fullTime">Full time</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="partTime" name="jobType" value="partTime">
                                            <label for="partTime">Part time</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="remote" name="jobType" value="remote">
                                            <label for="remote">Remote</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="internship" name="jobType" value="internship">
                                            <label for="internship">Internship</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="contract" name="jobType" value="contract">
                                            <label for="contract">Contract</label>
                                        </li>
                                    </ul>
                                </div>
                            </div>
    
                            <div class="flex flex-col gap-y-2 filter">
                                <div class="flex md:justify-between cursor-pointer hover:text-[#10B981]">
                                    <span class="w-[40%] md:w-[100%] font-semibold text-lg md:text-2xl">Job Category</span> 
                                    <div class="w-5 flex items-center">
                                        <img id="jobCategoryArrow" class="arrow transition-transform" src="/public/images/arrow-up.png" alt="arow up"> 
                                    </div>
                                </div> 
    
                                <div class="hidden dropdown" id="jobCategory">
                                    <ul class="flex flex-col gap-y-2">
                                        <li>
                                            <input type="checkbox" id="design" name="jobCategory" value="design">
                                            <label for="design">Design</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="sales" name="jobCategory" value="sales">
                                            <label for="sales">Sales</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="marketing" name="jobCategory" value="marketing">
                                            <label for="marketing">Marketing</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="finance" name="jobCategory" value="finance">
                                            <label for="finance">Finance</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="technology" name="jobCategory" value="technology">
                                            <label for="technology">Technology</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="engineering" name="jobCategory" value="engineering">
                                            <label for="engineering">Engineering</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="business" name="jobCategory" value="business">
                                            <label for="business">Business</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="humanResource" name="jobCategory" value="humanResource">
                                            <label for="humanResource">Human Resource</label>
                                        </li>
                                    </ul>
                                </div>
                            </div>
    
                            <div class="flex flex-col gap-y-2 filter">
                                <div class="flex md:justify-between cursor-pointer hover:text-[#10B981]">
                                    <span class="w-[40%] md:w-[100%] font-semibold text-lg md:text-2xl">Job Level</span> 
                                    <div class="w-5 flex items-center">
                                        <img class="arrow transition-transform" src="/public/images/arrow-up.png" alt="arow up"> 
                                    </div>
                                </div>
    
                                <div class="hidden dropdown">
                                    <ul class="flex flex-col gap-y-2">
                                        <li>
                                            <input type="checkbox" id="entryLevel" name="jobLevel" value="entryLevel">
                                            <label for="entryLevel">Entry Level</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="midLevel" name="jobLevel" value="midLevel">
                                            <label for="midLevel">Mid Level</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="seniorLevel" name="jobLevel" value="seniorLevel">
                                            <label for="seniorLevel">Senior Level</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="director" name="jobLevel" value="director">
                                            <label for="director">Director</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="vpOrAbove" name="jobLevel" value="vpOrAbove">
                                            <label for="vpOrAbove">VP or above</label>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="flex flex-col gap-y-2 filter">
                                <div class="flex md:justify-between cursor-pointer hover:text-[#10B981]">
                                    <span class="w-[40%] md:w-[100%] font-semibold text-lg md:text-2xl">Salary Range</span> 
                                    <div class="w-5 flex items-center">
                                        <img class="arrow transition-transform" src="/public/images/arrow-up.png" alt="arow up"> 
                                    </div>
                                </div>
    
                                <div class="hidden dropdown">
                                    <ul class="flex flex-col gap-y-2">
                                        <li>
                                            <input type="checkbox" id="salary5" name="salary" value="0-100">
                                            <label for="salary5">Below $100</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="salary100" name="salary" value="100-1000">
                                            <label for="salary100">$100 - $1000</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="salary1000" name="salary" value="1000-5000">
                                            <label for="salary1000">$1000 - $5000</label>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="salary5000" name="salary" value="5000">
                                            <label for="salary5000">$5000 and above</label>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    <div class="w-[100%] mt-5 md:mt-0 md:w-[65%]" id="searchedJobs">
                        <div class="flex flex-col gap-6">
                            <% if (jobs && jobs.length > 0) { %>

                                <div>
                                    <div class="flex justify-between">
                                        <h2 class="font-semibold text-2xl">All Jobs</h2>
                                        <h2 class="font-semibold text-lg">Sort by : <span class="font-medium">Most relevant</span></h2>
                                    </div>
                                    <p>Showing <%= jobs.length %> results</p>
                                </div>
        
                                <div class="flex flex-col gap-y-4 md:gap-y-8">
                                                                
                                    <% jobs.forEach(job => { %>
                                        
                                            <div class="job-card hover:shadow-2xl">
                                                <a href="/job-info/<%= job._id %>" class="no-underline">
                                                    <div class="flex rounded-md py-4 border border-black">
                                                        <div class="flex gap-2 md:gap-4 md:gap-8 w-[65%] px-3">
                                                            <div><img src="/public/images/Ellipse.png" alt=""></div>
                                                            
                                                            <div class="capitalize">
                                                                <h2 class="text-lg md:text-2xl font-semibold"><%= job.jobTitle %></h2>
                                                                <h3 class="text-md font-semibold"><%= job.companyName %></h3>
                                                                <div class="flex gap-2 md:gap-6 text-sm font-medium">
                                                                    <p><%= job.jobType %></p>
                                                                    <p><%= job.companyLocation %></p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <a href="/job-application?id=<%= job._id %>" class="apply-button no-underline  hover:shadow-2xl">
                                                        <button class="rounded-lg bg-[#10B981] text-white text-sm px-2 md:px-10 py-2 transition transition-transform duration-300 hover:scale-105">Apply Now</button>
                                                    </a>
                                                </a>
                                            </div>
                                        
                                    <% }); %>
                                
                            <% } else { %>
                                <p>No jobs found.</p>
                            <% } %>
                                <div class="job-card">
                                    <div class=" flex rounded-md py-4 border border-black ">
                                        <div class="flex gap-2 md:gap-4 md:gap-8 w-[65%] px-3">
                                            <div><img src="/public/images/Ellipse.png" alt=""></div>
        
                                            <div class="">
                                                <h2 class="text-lg md:text-2xl font-semibold">Senior Developer </h2>
                                                <h3 class="text-md font-semibold">Foodmandu</h3>
                                                <div class="flex gap-2 md:gap-6 text-sm font-medium">
                                                    <p>Full time</p>
                                                    <p>Koteshor Nepal</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex justify-between w-[35%] md:w-[35%]">
                                            <div class="flex items-center">
                                                <button class="rounded-lg bg-[#10B981] text-white text-sm px-2 md:px-10 py-2">Apply Now</button>
                                            </div>
            
                                            <div class="h-10 w-10">
                                                <img src="/public/images/save-icon.png" alt="">
                                            </div>
                                        </div>
        
                                        
                                    </div>
                                </div>
    
                                <div class="job-card">
                                    <div class=" flex rounded-md py-4 border border-black ">
                                        <div class="flex gap-2 md:gap-4 md:gap-8 w-[65%] px-3">
                                            <div><img src="/public/images/Ellipse.png" alt=""></div>
        
                                            <div class="">
                                                <h2 class="text-lg md:text-2xl font-semibold">Senior Developer </h2>
                                                <h3 class="text-md font-semibold">Foodmandu</h3>
                                                <div class="flex gap-2 md:gap-6 text-sm font-medium">
                                                    <p>Full time</p>
                                                    <p>Koteshor Nepal</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex justify-between w-[35%] ">
                                            <div class="flex items-center">
                                                <button class="rounded-lg bg-[#10B981] text-white text-sm px-2 md:px-10 py-2">Apply Now</button>
                                            </div>
            
                                            <div class="h-10 w-10">
                                                <img src="/public/images/save-icon.png" alt="">
                                            </div>
                                        </div>
        
                                        
                                    </div>
                                </div>
    
                                <div class="job-card">
                                    <div class=" flex rounded-md py-4 border border-black ">
                                        <div class="flex gap-2 md:gap-4 md:gap-8 w-[65%] px-3">
                                            <div><img src="/public/images/Ellipse.png" alt=""></div>
        
                                            <div class="">
                                                <h2 class="text-lg md:text-2xl font-semibold">Senior Developer </h2>
                                                <h3 class="text-md font-semibold">Foodmandu</h3>
                                                <div class="flex gap-2 md:gap-6 text-sm font-medium">
                                                    <p>Full time</p>
                                                    <p>Koteshor Nepal</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex justify-between w-[35%] ">
                                            <div class="flex items-center">
                                                <button class="rounded-lg bg-[#10B981] text-white text-sm px-2 md:px-10 py-2">Apply Now</button>
                                            </div>
            
                                            <div class="h-10 w-10">
                                                <img src="/public/images/save-icon.png" alt="">
                                            </div>
                                        </div>                                        
                                    </div>
                                </div>
    
                                <div class="job-card">
                                    <div class=" flex rounded-md py-4 border border-black ">
                                        <div class="flex gap-2 md:gap-4 md:gap-8 w-[65%] px-3">
                                            <div><img src="/public/images/Ellipse.png" alt=""></div>
        
                                            <div class="">
                                                <h2 class="text-lg md:text-2xl font-semibold">Senior Developer </h2>
                                                <h3 class="text-md font-semibold">Foodmandu</h3>
                                                <div class="flex gap-2 md:gap-6 text-sm font-medium">
                                                    <p>Full time</p>
                                                    <p>Koteshor Nepal</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex justify-between w-[35%]">
                                            <div class="flex items-center">
                                                <button class="rounded-lg bg-[#10B981] text-white text-sm px-2 md:px-10 py-2">Apply Now</button>
                                            </div>
            
                                            <div class="h-10 w-10">
                                                <img src="/public/images/save-icon.png" alt="">
                                            </div>
                                        </div>                                        
                                    </div>
                                </div>
    
                                <div class="job-card">
                                    <div class=" flex rounded-md py-4 border border-black ">
                                        <div class="flex gap-2 md:gap-4 md:gap-8 w-[65%] px-3">
                                            <div><img src="/public/images/Ellipse.png" alt=""></div>
        
                                            <div class="">
                                                <h2 class="text-lg md:text-2xl font-semibold">Senior Developer </h2>
                                                <h3 class="text-md font-semibold">Foodmandu</h3>
                                                <div class="flex gap-2 md:gap-6 text-sm font-medium">
                                                    <p>Full time</p>
                                                    <p>Koteshor Nepal</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex justify-between w-[35%]">
                                            <div class="flex items-center">
                                                <button class="rounded-lg bg-[#10B981] text-white text-sm px-2 md:px-10 py-2">Apply Now</button>
                                            </div>
            
                                            <div class="h-10 w-10">
                                                <img src="/public/images/save-icon.png" alt="">
                                            </div>
                                        </div>                                       
                                    </div>
                                </div>
    
                                <div class="job-card">
                                    <div class=" flex rounded-md py-4 border border-black ">
                                        <div class="flex gap-2 md:gap-4 md:gap-8 w-[65%] px-3">
                                            <div><img src="/public/images/Ellipse.png" alt=""></div>
        
                                            <div class="">
                                                <h2 class="text-lg md:text-2xl font-semibold">Senior Developer </h2>
                                                <h3 class="text-md font-semibold">Foodmandu</h3>
                                                <div class="flex gap-2 md:gap-6 text-sm font-medium">
                                                    <p>Full time</p>
                                                    <p>Koteshor Nepal</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex justify-between w-[35%]">
                                            <div class="flex items-center">
                                                <button class="rounded-lg bg-[#10B981] text-white text-sm px-2 md:px-10 py-2">Apply Now</button>
                                            </div>
            
                                            <div class="h-10 w-10">
                                                <img src="/public/images/save-icon.png" alt="">
                                            </div>
                                        </div>                                        
                                    </div>
                                </div>
                            </div>
                        </div>
    
                      
                    </div>
                </div>
                
            </div>
        </section>

        <section class=" pb-14 flex flex-col items-center" id="recommended-jobs">
            <div class=" max-page-width flex flex-col justify-between w-full relative gap-10">
                <div class="flex flex-row justify-between px-10 sm:px-12 lg:px-28 pt-10 w-full">
                    <h2 class="text-2xl font-semibold">Featured <span class="text-[#10B981]">Jobs</span></h2>
                    <!-- <h3 class="flex flex-row items-center gap-2 font-semibold">Show all jobs <span><img src="public/images/Arrow.png" alt="right arraow icon"></span></h3> -->
                </div>                            
    
                <div class="flex max-w-full justify-between flex-wrap mx-10 md:mx-12 lg:mx-28 gap-6 md:gap-8 lg:gap-5" >
                    <div class="categories-box bg-white px-6 pb-6 pt-3 rounded-lg w-full sm:w-[calc(50%-15px)] md:w-[calc(50%-20px)] lg:w-[calc(33.33%-20px)] flex flex-col gap-y-8">
                        <div class="flex flex-row gap-4">
                            <div class="w-12 h-12">
                                <img src="/public/images/Ellipse.png" alt="">
                            </div>
                            
                            <div>
                                <h3 class="font-normal text-lg">Foodmandu</h3>
                                <h4>Kathmandu, Nepal</h4>
                            </div>
                        </div>
                        
                        <div class="flex flex-col gap-y-3 px-3">
                            <h3 class="font-normal text-2xl">Senior UI Designer</h3>
                            <h4>Fulltime</h4>
                            <p class="text-[#585858]">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Consequat 
                                nunc ac a magna at elementum. Cras arcu varius in aliquam habitant 
                                fermentum. Mi sit lorem mollis vitae quis curabitur vestibulum.
                            </p>
                        </div>
                        
                        <div class="flex flex-row items-center justify-between px-3">
                            <h3 class="text-base">$5000</h3>
                            <a href="job-application.html">
                                <h3 class="text-[#10B981] text-xl">Apply Now</h3>
                            </a>
                        </div>                   
                    </div>
                    
                    <div class="categories-box bg-white px-6 pb-6 pt-3 rounded-lg w-full sm:w-[calc(50%-15px)] md:w-[calc(50%-20px)] lg:w-[calc(33.33%-20px)] flex flex-col gap-y-8">
                        <div class="flex flex-row gap-4">
                            <div class="w-12 h-12">
                                <img src="/public/images/Ellipse.png" alt="">
                            </div>
                            
                            <div>
                                <h3 class="font-normal text-lg">Foodmandu</h3>
                                <h4>Kathmandu, Nepal</h4>
                            </div>
                        </div>
                        
                        <div class="flex flex-col gap-y-3 px-3">
                            <h3 class="font-normal text-2xl">Senior UI Designer</h3>
                            <h4>Fulltime</h4>
                            <p class="text-[#585858]">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Consequat 
                                nunc ac a magna at elementum. Cras arcu varius in aliquam habitant 
                                fermentum. Mi sit lorem mollis vitae quis curabitur vestibulum.
                            </p>
                        </div>
                        
                        <div class="flex flex-row items-center justify-between px-3">
                            <h3 class="text-base">$5000</h3>
                            <h3 class="text-[#10B981] text-xl">Apply Now</h3>
                        </div>                   
                    </div>
                    
                    <div class="categories-box bg-white px-6 pb-6 pt-3 rounded-lg w-full sm:w-[calc(50%-15px)] md:w-[calc(50%-20px)] lg:w-[calc(33.33%-20px)] flex flex-col gap-y-8">
                        <div class="flex flex-row gap-4">
                            <div class="w-12 h-12">
                                <img src="/public/images/Ellipse.png" alt="">
                            </div>
                            
                            <div>
                                <h3 class="font-normal text-lg">Foodmandu</h3>
                                <h4>Kathmandu, Nepal</h4>
                            </div>
                        </div>
                        
                        <div class="flex flex-col gap-y-3 px-3">
                            <h3 class="font-normal text-2xl">Senior UI Designer</h3>
                            <h4>Fulltime</h4>
                            <p class="text-[#585858]">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Consequat 
                                nunc ac a magna at elementum. Cras arcu varius in aliquam habitant 
                                fermentum. Mi sit lorem mollis vitae quis curabitur vestibulum.
                            </p>
                        </div>
                        
                        <div class="flex flex-row items-center justify-between px-3">
                            <h3 class="text-base">$5000</h3>
                            <h3 class="text-[#10B981] text-xl">Apply Now</h3>
                        </div>                   
                    </div>

                    <div class="categories-box bg-white px-6 pb-6 pt-3 rounded-lg w-full sm:w-[calc(50%-15px)] md:w-[calc(50%-20px)] lg:w-[calc(33.33%-20px)] flex flex-col gap-y-8">
                        <div class="flex flex-row gap-4">
                            <div class="w-12 h-12">
                                <img src="/public/images/Ellipse.png" alt="">
                            </div>
                            
                            <div>
                                <h3 class="font-normal text-lg">Foodmandu</h3>
                                <h4>Kathmandu, Nepal</h4>
                            </div>
                        </div>
                        
                        <div class="flex flex-col gap-y-3 px-3">
                            <h3 class="font-normal text-2xl">Senior UI Designer</h3>
                            <h4>Fulltime</h4>
                            <p class="text-[#585858]">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Consequat 
                                nunc ac a magna at elementum. Cras arcu varius in aliquam habitant 
                                fermentum. Mi sit lorem mollis vitae quis curabitur vestibulum.
                            </p>
                        </div>
                        
                        <div class="flex flex-row items-center justify-between px-3">
                            <h3 class="text-base">$5000</h3>
                            <h3 class="text-[#10B981] text-xl">Apply Now</h3>
                        </div>                   
                    </div>
    
                    <div class="categories-box bg-white px-6 pb-6 pt-3 rounded-lg w-full sm:w-[calc(50%-15px)] md:w-[calc(50%-20px)] lg:w-[calc(33.33%-20px)] flex flex-col gap-y-8">
                        <div class="flex flex-row gap-4">
                            <div class="w-12 h-12">
                                <img src="/public/images/Ellipse.png" alt="">
                            </div>
                            
                            <div>
                                <h3 class="font-normal text-lg">Foodmandu</h3>
                                <h4>Kathmandu, Nepal</h4>
                            </div>
                        </div>
                        
                        <div class="flex flex-col gap-y-3 px-3">
                            <h3 class="font-normal text-2xl">Senior UI Designer</h3>
                            <h4>Fulltime</h4>
                            <p class="text-[#585858]">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Consequat 
                                nunc ac a magna at elementum. Cras arcu varius in aliquam habitant 
                                fermentum. Mi sit lorem mollis vitae quis curabitur vestibulum.
                            </p>
                        </div>
                        
                        <div class="flex flex-row items-center justify-between px-3">
                            <h3 class="text-base">$5000</h3>
                            <h3 class="text-[#10B981] text-xl">Apply Now</h3>
                        </div>                   
                    </div>

                    <div class="categories-box bg-white px-6 pb-6 pt-3 rounded-lg w-full sm:w-[calc(50%-15px)] md:w-[calc(50%-20px)] lg:w-[calc(33.33%-20px)] flex flex-col gap-y-8">
                        <div class="flex flex-row gap-4">
                            <div class="w-12 h-12">
                                <img src="/public/images/Ellipse.png" alt="">
                            </div>
                            
                            <div>
                                <h3 class="font-normal text-lg">Foodmandu</h3>
                                <h4>Kathmandu, Nepal</h4>
                            </div>
                        </div>
                        
                        <div class="flex flex-col gap-y-3 px-3">
                            <h3 class="font-normal text-2xl">Senior UI Designer</h3>
                            <h4>Fulltime</h4>
                            <p class="text-[#585858]">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Consequat 
                                nunc ac a magna at elementum. Cras arcu varius in aliquam habitant 
                                fermentum. Mi sit lorem mollis vitae quis curabitur vestibulum.
                            </p>
                        </div>
                        
                        <div class="flex flex-row items-center justify-between px-3">
                            <h3 class="text-base">$5000</h3>
                            <h3 class="text-[#10B981] text-xl">Apply Now</h3>
                        </div>                   
                    </div>

                    <div class="categories-box bg-white px-6 pb-6 pt-3 rounded-lg w-full sm:w-[calc(50%-15px)] md:w-[calc(50%-20px)] lg:w-[calc(33.33%-20px)] flex flex-col gap-y-8">
                        <div class="flex flex-row gap-4">
                            <div class="w-12 h-12">
                                <img src="/public/images/Ellipse.png" alt="">
                            </div>
                            
                            <div>
                                <h3 class="font-normal text-lg">Foodmandu</h3>
                                <h4>Kathmandu, Nepal</h4>
                            </div>
                        </div>
                        
                        <div class="flex flex-col gap-y-3 px-3">
                            <h3 class="font-normal text-2xl">Senior UI Designer</h3>
                            <h4>Fulltime</h4>
                            <p class="text-[#585858]">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Consequat 
                                nunc ac a magna at elementum. Cras arcu varius in aliquam habitant 
                                fermentum. Mi sit lorem mollis vitae quis curabitur vestibulum.
                            </p>
                        </div>
                        
                        <div class="flex flex-row items-center justify-between px-3">
                            <h3 class="text-base">$5000</h3>
                            <h3 class="text-[#10B981] text-xl">Apply Now</h3>
                        </div>                   
                    </div>

                    <div class="categories-box bg-white px-6 pb-6 pt-3 rounded-lg w-full sm:w-[calc(50%-15px)] md:w-[calc(50%-20px)] lg:w-[calc(33.33%-20px)] flex flex-col gap-y-8">
                        <div class="flex flex-row gap-4">
                            <div class="w-12 h-12">
                                <img src="/public/images/Ellipse.png" alt="">
                            </div>
                            
                            <div>
                                <h3 class="font-normal text-lg">Foodmandu</h3>
                                <h4>Kathmandu, Nepal</h4>
                            </div>
                        </div>
                        
                        <div class="flex flex-col gap-y-3 px-3">
                            <h3 class="font-normal text-2xl">Senior UI Designer</h3>
                            <h4>Fulltime</h4>
                            <p class="text-[#585858]">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Consequat 
                                nunc ac a magna at elementum. Cras arcu varius in aliquam habitant 
                                fermentum. Mi sit lorem mollis vitae quis curabitur vestibulum.
                            </p>
                        </div>
                        
                        <div class="flex flex-row items-center justify-between px-3">
                            <h3 class="text-base">$5000</h3>
                            <h3 class="text-[#10B981] text-xl">Apply Now</h3>
                        </div>                   
                    </div>

                    <div class="categories-box bg-white px-6 pb-6 pt-3 rounded-lg w-full sm:w-[calc(50%-15px)] md:w-[calc(50%-20px)] lg:w-[calc(33.33%-20px)] flex flex-col gap-y-8">
                        <div class="flex flex-row gap-4">
                            <div class="w-12 h-12">
                                <img src="/public/images/Ellipse.png" alt="">
                            </div>
                            
                            <div>
                                <h3 class="font-normal text-lg">Foodmandu</h3>
                                <h4>Kathmandu, Nepal</h4>
                            </div>
                        </div>
                        
                        <div class="flex flex-col gap-y-3 px-3">
                            <h3 class="font-normal text-2xl">Senior UI Designer</h3>
                            <h4>Fulltime</h4>
                            <p class="text-[#585858]">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Consequat 
                                nunc ac a magna at elementum. Cras arcu varius in aliquam habitant 
                                fermentum. Mi sit lorem mollis vitae quis curabitur vestibulum.
                            </p>
                        </div>
                        
                        <div class="flex flex-row items-center justify-between px-3">
                            <h3 class="text-base">$5000</h3>
                            <h3 class="text-[#10B981] text-xl">Apply Now</h3>
                        </div>                   
                    </div>
                </div>
            </div>
            <div class="pb-24"></div>
        </section>       

        <!-- Spinner element -->
        <div id="spinner" class="flex-col hidden fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50">
            <div class="spinner-border animate-spin inline-block w-16 h-16 border-8 rounded-full text-green-500"></div>
        </div>
    </main>

    <script>
        
        document.addEventListener('DOMContentLoaded',async function() {
            // Get search terms from URL query parameters
            const urlParams = new URLSearchParams(window.location.search);
            console.log(urlParams);
            const searchTitle = urlParams.get('searchTitle');
            const searchLocation = urlParams.get('searchLocation');

            // Populate search inputs with search terms
            const searchTitleInput = document.getElementById('searchTitle');
            const searchLocationInput = document.getElementById('searchLocation');

            if (searchTitle) {
                searchTitleInput.value = searchTitle;
            }
            if (searchLocation) {
                searchLocationInput.value = searchLocation;
            }

            const category = urlParams.get('category');
            console.log('category:', category);
    
            // Check and set the category filter if it exists
            if (category) {
                const checkbox = await document.querySelector(`input[name="jobCategory"][value="${category}"]`);
                if (checkbox) {
                    checkbox.checked = true;
                    
                    const categoryFilterDropdown = document.getElementById('jobCategory');
                    const categoryFilterArrow = document.getElementById('jobCategoryArrow');

                    categoryFilterDropdown.classList.toggle('hidden')
                    categoryFilterArrow.classList.toggle('rotate-180')
                }
                // Call handleFilterSelection to apply filters and fetch jobs
                // handleFilterSelection();
            }
            
            

            //TOGGLE THE FILTER DROPDOWN
            const jobFilter = document.querySelectorAll('#filters .filter')
            // console.log(jobFilter)
            jobFilter.forEach(filter => {
                filter.addEventListener('click', function(){
                    const thisFilterDropdown = this.querySelector('.dropdown');
                    const thisFilterArrow = this.querySelector('.arrow');
                    // console.log(thisFilterArrow)

                    thisFilterDropdown.classList.toggle('hidden')
                    thisFilterArrow.classList.toggle('rotate-180')
                    // console.log(thisFilterDropdown)
                })
            })

        });
            //FILTER QUERY

            // Function to handle filter selection
            async function handleFilterSelection() {
                const formData = new FormData(document.getElementById('findJobForm')); // Get form data
                const searchParams = new URLSearchParams(formData); // Convert form data to URLSearchParams object

                // Retrieve selected filter values and add them to the search parameters
                const selectedFilters = getSelectedFilters();
                for (const filter in selectedFilters) {
                    if (selectedFilters.hasOwnProperty(filter)) {
                        const filterValue = selectedFilters[filter].join(',');
                        searchParams.append(filter, filterValue);
                    }
                }

                document.getElementById('spinner').classList.remove('hidden');

                const minSpinnerDuration = 1000; // 1 second

                // Start a timer for the minimum spinner duration
                const spinnerTimeout = new Promise(resolve => setTimeout(resolve, minSpinnerDuration));


                try {
                    const response = await fetch('/find-job/jobs?' + searchParams.toString()); // Make GET request with query parameters
                    const data = await response.json();
                    await spinnerTimeout;
                    updateJobListings(data.jobs); // Update the job listings on the page       
                } catch (error) {
                    console.error('Error:', error);
                }finally {
                    // Hide the spinner
                    document.getElementById('spinner').classList.add('hidden');
                }
            }

            // Function to get selected filters
            function getSelectedFilters() {
                const selectedFilters = {}; // Object to hold the selected filters
                filterContainer.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                    if (checkbox.checked) { // Check if the checkbox is selected
                        const filterType = checkbox.name; // Get the name of the checkbox (e.g., jobType, jobCategory)
                        if (!selectedFilters[filterType]) {
                            selectedFilters[filterType] = []; // Initialize an array for the filter type if it doesn't exist
                        }
                        selectedFilters[filterType].push(checkbox.value); // Add the checkbox value to the array
                    }
                });
                return selectedFilters; // Return the object with all selected filters
            }

            // Function to update job listings on the page
            function updateJobListings(jobs) {
                const jobListingsContainer = document.querySelector('#searchedJobs .flex.flex-col');
                jobListingsContainer.innerHTML = ''; // Clear previous job listings

                if (jobs.length > 0) {
                    const resultInfo = `
                        <div>
                            <div class="flex justify-between">
                                <h2 class="font-semibold text-2xl">All Jobs</h2>
                                <h2 class="font-semibold text-lg">Sort by : <span class="font-medium">Most relevant</span></h2>
                            </div>
                            <p>Showing ${jobs.length} results</p>
                        </div>`;
                    jobListingsContainer.insertAdjacentHTML('beforeend', resultInfo); 
                    
                    jobs.forEach(job => {
                        const jobCard = `
                            <div class="job-card">
                                <a href="/job-info/${job._id}" class="no-underline">
                                    <div class="flex rounded-md py-4 border border-black">
                                        <div class="flex gap-2 md:gap-4 md:gap-8 w-[65%] px-3">
                                            <div><img src="/public/images/Ellipse.png" alt=""></div>
                                            <div class="capitalize">
                                                <h2 class="text-lg md:text-2xl font-semibold">${job.jobTitle}</h2>
                                                <h3 class="text-md font-semibold">${job.companyName}</h3>
                                                <div class="flex gap-2 md:gap-6 text-sm font-medium">
                                                    <p>${job.jobType}</p>
                                                    <p>${job.companyLocation}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <a href="/job-application?id=${job._id}" class="apply-button no-underline">
                                        <button class="rounded-lg bg-[#10B981] text-white text-sm px-2 md:px-10 py-2">Apply Now</button>
                                    </a>
                                </a>
                            </div>`;
                        jobListingsContainer.insertAdjacentHTML('beforeend', jobCard); // Insert each job card into the container
                    });
                } else {
                    jobListingsContainer.innerHTML = '<p>No jobs found.</p>'; // Show a message if no jobs are found
                }
            }

            // Event listener for filter checkboxes
            const filterContainer = document.querySelector('#filters'); // Ensure this matches your filter container ID
            filterContainer.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', handleFilterSelection);
            });

            // Initial event listener for the search form submission
            document.getElementById('findJobForm').addEventListener('submit', async function(event) {
                event.preventDefault(); // Prevent default form submission behavior
                handleFilterSelection(); // Trigger filter selection handler
            });           
       

    </script>
</body>
</html>